!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/form-field"),require("@angular/material/icon"),require("@angular/material/input")):"function"==typeof define&&define.amd?define("ngx-input-file",["exports","@angular/core","@angular/forms","@angular/common","@angular/material/button","@angular/material/form-field","@angular/material/icon","@angular/material/input"],t):t(e["ngx-input-file"]={},e.ng.core,e.ng.forms,e.ng.common,e.ng.material.button,e.ng.material["form-field"],e.ng.material.icon,e.ng.material.input)}(this,function(e,n,r,i,o,a,l,c){"use strict";var t="bounce-in",s="*",u=1,f="add",p="delete",d="insert_drive_file",m="link",h=!1,b="Link",g=null,v={badFile:0,limitReached:1,sizeReached:2};function y(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}v[v.badFile]="badFile",v[v.limitReached]="limitReached",v[v.sizeReached]="sizeReached";var k=function(){function e(e){this._config=e}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),e.prototype.limitGuard=function(e,t){return e.length<t},e.prototype.sizeGuard=function(e,t){return!t||e.size<1024*t*1024},e.prototype.typeGuard=function(e,t){var i,n,r=null==t;if(t){var o=t.replace("*","").split(",");try{for(var a=y(o),l=a.next();!l.done;l=a.next()){var c=l.value;if(e.type.startsWith(c)||"."===c.charAt(0)&&null!=e.name&&e.name.endsWith(c)){r=!0;break}}}catch(s){i={error:s}}finally{try{l&&!l.done&&(n=a["return"])&&n.call(a)}finally{if(i)throw i.error}}}return r},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:n.Inject,args:["config"]}]}]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e(n.inject("config"))},token:e,providedIn:"root"}),e}();function w(e){if(null!=r.Validators.required(e))return null;var t=e.value;return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)?null:{url:!0}}var F=function(){function i(e,t){this.formBuilder=e,this.inputFileService=t,this.acceptedFile=new n.EventEmitter,this.deletedFile=new n.EventEmitter,this.rejectedFile=new n.EventEmitter,this.files=new Array,this.id="ngx-input-file-"+i.nextId++,this.onChange=function(e){},this.onTouched=function(){}}return Object.defineProperty(i.prototype,"classAnimation",{get:function(){return this._classAnimation||this.inputFileService.config.classAnimation||t},set:function(e){this._classAnimation=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fileAccept",{get:function(){return this._fileAccept||this.inputFileService.config.fileAccept||s},set:function(e){this._fileAccept=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fileLimit",{get:function(){return this._fileLimit||this.inputFileService.config.fileLimit||u},set:function(e){this._fileLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconAdd",{get:function(){return this._iconAdd||this.inputFileService.config.iconAdd||f},set:function(e){this._iconAdd=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconDelete",{get:function(){return this._iconDelete||this.inputFileService.config.iconDelete||p},set:function(e){this._iconDelete=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconFile",{get:function(){return this._iconFile||this.inputFileService.config.iconFile||d},set:function(e){this._iconFile=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconLink",{get:function(){return this._iconLink||this.inputFileService.config.iconLink||m},set:function(e){this._iconLink=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"linkEnabled",{get:function(){return this._linkEnabled||this.inputFileService.config.linkEnabled||h},set:function(e){this._linkEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"placeholderLink",{get:function(){return this._placeholderLink||this.inputFileService.config.placeholderLink||b},set:function(e){this._placeholderLink=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sizeLimit",{get:function(){return this._sizeLimit||this.inputFileService.config.sizeLimit||g},set:function(e){this._sizeLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canAddFile",{get:function(){return this.files&&this.files.length<this.fileLimit},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this.setForm()},i.prototype.onDeleteFile=function(e){if(!this.disabled){var t=this.files.slice();this.deletedFile.emit(t[e]),t.splice(e,1),this.writeValue(t)}},i.prototype.onDragOver=function(e){e.ripple.launch({centered:!0,persistent:!0})},i.prototype.onDragLeave=function(e){e.ripple.fadeOutAll()},i.prototype.onLink=function(){this.addLink=!this.addLink},i.prototype.onReplaceFile=function(e,t,i,n){if(!this.disabled){var r=this.files.slice(),o={file:e.item(0)};i.ripple.fadeOutAll(),this.fileGuard(r,o,!0)&&(r[t]=o,this.acceptedFile.emit(o)),this.writeValue(r),n&&(n.value="")}},i.prototype.onSelectFile=function(e,t){var i=this;if(!this.disabled){t.ripple.fadeOutAll();var n=this.files.slice();Array.from(e).forEach(function(e){var t={file:e};i.fileGuard(n,t)&&(n.push(t),i.acceptedFile.emit(t))}),this.writeValue(n),this.fileInput.nativeElement.value=""}},i.prototype.onSubmitLink=function(){if(!this.disabled&&this.form.valid){var e=this.files.slice(),t={link:this.form.value.link,preview:this.form.value.link};e.push(t),this.acceptedFile.emit(t),this.onLink(),this.form.reset(),this.writeValue(e)}},i.prototype.registerOnChange=function(e){this.onChange=e},i.prototype.registerOnTouched=function(e){this.onTouched=e},i.prototype.setDisabledState=function(e){this.disabled=e},i.prototype.writeValue=function(e){e||(e=new Array),this.files=e,this.setFilePreview(),this.onChange(this.files)},i.prototype.fileGuard=function(e,t,i){return i||this.inputFileService.limitGuard(e,this.fileLimit)?this.inputFileService.sizeGuard(t.file,this.sizeLimit)?!!this.inputFileService.typeGuard(t.file,this.fileAccept)||(this.rejectedFile.emit({reason:v.badFile,file:t}),!1):(this.rejectedFile.emit({reason:v.sizeReached,file:t}),!1):(this.rejectedFile.emit({reason:v.limitReached,file:t}),!1)},i.prototype.setFilePreview=function(){var i=this,e=function(e){if(null!=n.files[e].file&&n.inputFileService.typeGuard(n.files[e].file,"image/*")){var t=new FileReader;t.onload=function(){i.files[e].preview=t.result},t.readAsDataURL(n.files[e].file)}},n=this;for(var t in this.files)e(t)},i.prototype.setForm=function(){this.form=this.formBuilder.group({link:["",[r.Validators.required,w]]})},i.nextId=0,i.decorators=[{type:n.Component,args:[{selector:"input-file",template:'<div class="input-file-container">\n    <label class="mat-orphan-label" [for]="id" [class.active]="files?.length" [innerHtml]="placeholder" *ngIf="placeholder"></label>\n    <div class="files-container">\n\n        <ng-container *ngFor="let file of files; let i = index">\n            <div class="file-container" [ngClass]="classAnimation">\n                <ng-container *ngTemplateOutlet="fileTemplate; context: { $implicit: file, index: i }"></ng-container>\n            </div>\n        </ng-container>\n\n        <ng-container *ngIf="canAddFile">\n            <div class="file-container">\n                <ng-container *ngIf="!addLink; else linkTemplate">\n                    <ng-container *ngTemplateOutlet="addTemplate"></ng-container>\n                </ng-container>\n            </div>\n        </ng-container>\n    </div>\n\n</div>\n\n<ng-template #addTemplate>\n    <button mat-button inputFileDropZone class="file-button" type="button" (click)="fileInput.click()" (itemDrop)="onSelectFile($event, selectButton)"\n        (itemDragOver)="onDragOver(selectButton)" (itemDragLeave)="onDragLeave(selectButton)" [disabled]="disabled" #selectButton>\n        <mat-icon class="input-icon">{{ iconAdd }}</mat-icon>\n    </button>\n    <button mat-button class="secondary-button" type="button" [disabled]="disabled" (click)="onLink()" *ngIf="linkEnabled">\n        <mat-icon>{{ iconLink }}</mat-icon>\n    </button>\n    <input [id]="id" [accept]="fileAccept" hidden type="file" [attr.multiple]="fileLimit > 1 ? true : null" #fileInput (change)="onSelectFile($event.target.files, selectButton)">\n</ng-template>\n\n<ng-template #fileTemplate let-file let-index="index">\n    <button mat-button inputFileDropZone class="replace-button" type="button" (click)="fileReplace.click()" (itemDrop)="onReplaceFile($event, index, replaceButton)"\n        [disabled]="disabled" (itemDragOver)="onDragOver(replaceButton)" (itemDragLeave)="onDragLeave(replaceButton)" #replaceButton>\n        <img class="image-preview" [src]="file.preview" *ngIf="file.preview; else noPreview">\n        <ng-template #noPreview>\n            <mat-icon class="input-icon">{{ iconFile }}</mat-icon>\n            <div class="file-name text-truncate" [innerHtml]="file.file.name" *ngIf="file.file"></div>\n        </ng-template>\n    </button>\n    <button mat-button class="secondary-button" type="button" (click)="onDeleteFile(index)" [disabled]="disabled">\n        <mat-icon>{{ iconDelete }}</mat-icon>\n    </button>\n    <input [accept]="fileAccept" hidden type="file" #fileReplace (change)="onReplaceFile($event.target.files, index, replaceButton, fileReplace)">\n</ng-template>\n\n<ng-template #linkTemplate>\n    <form class="form-link slide-in-up" [formGroup]="form" (ngSubmit)="onSubmitLink()" novalidate>\n        <mat-form-field class="input-link">\n            <input matInput formControlName="link" [placeholder]="placeholderLink">\n        </mat-form-field>\n        <div class="form-link-button">\n            <button mat-button type="button" (click)="onLink()" [disabled]="disabled">\n                <mat-icon>arrow_back</mat-icon>\n            </button>\n            <button mat-button type="submit" [disabled]="disabled">\n                <mat-icon>check</mat-icon>\n            </button>\n        </div>\n    </form>\n</ng-template>',providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return i}),multi:!0}],styles:[".input-file-container{position:relative}.input-file-container .files-container{display:flex;flex-direction:row;flex-wrap:wrap;padding-top:1.25rem}.input-file-container .file-button,.input-file-container .file-container{align-items:center;display:flex;height:10rem;justify-content:center;width:10rem}.input-file-container .secondary-button{width:10rem}.input-file-container .file-button{flex:1}.input-file-container .file-container{flex-direction:column;margin-right:1rem}.input-file-container .replace-button{flex:1;width:10rem}.input-file-container .mat-button:focus{outline:0}.input-file-container .file-name{width:calc(10rem - 2.5rem)}.input-file-container .image-preview{margin:0 -16px;height:10rem;-o-object-fit:contain;object-fit:contain;width:10rem}.input-file-container .input-icon{font-size:calc(10rem / 4);height:calc(10rem / 4);width:calc(10rem / 4)}.input-file-container .form-link{display:flex;flex-direction:column;width:10rem}.input-file-container .input-link{width:10rem}.input-file-container .form-link-button{display:flex;flex-direction:row}.input-file-container .form-link-button .mat-button{min-width:calc(10rem / 2);width:calc(10rem / 2)}.input-file-container .mat-orphan-label{color:rgba(0,0,0,.54);display:block;font-size:1rem;left:0;margin:0;position:absolute;top:0;-webkit-transform-origin:0;transform-origin:0;transition:.4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1)}.input-file-container .mat-orphan-label.active{-webkit-transform:scale(.75);transform:scale(.75)}@-webkit-keyframes bounceIn{20%,40%,60%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}20%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}40%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}60%{opacity:1;-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}@keyframes bounceIn{20%,40%,60%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}20%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}40%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}60%{opacity:1;-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}.bounce-in{-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-name:bounceIn;animation-name:bounceIn}@-webkit-keyframes slideInUp{from{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}@keyframes slideInUp{from{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}}.slide-in-up{-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-name:slideInUp;animation-name:slideInUp}"]}]}],i.ctorParameters=function(){return[{type:r.FormBuilder},{type:k}]},i.propDecorators={disabled:[{type:n.Input}],placeholder:[{type:n.Input}],classAnimation:[{type:n.Input}],fileAccept:[{type:n.Input}],fileLimit:[{type:n.Input}],iconAdd:[{type:n.Input}],iconDelete:[{type:n.Input}],iconFile:[{type:n.Input}],iconLink:[{type:n.Input}],linkEnabled:[{type:n.Input}],placeholderLink:[{type:n.Input}],sizeLimit:[{type:n.Input}],acceptedFile:[{type:n.Output}],deletedFile:[{type:n.Output}],rejectedFile:[{type:n.Output}],fileInput:[{type:n.ViewChild,args:["fileInput"]}]},i}(),L=function(){function e(){this.disabled=!1,this.itemDragOver=new n.EventEmitter,this.itemDragLeave=new n.EventEmitter,this.itemDrop=new n.EventEmitter,this.whiteListClasses=["file-button","mat-button-wrapper","input-icon"]}return e.prototype.onDragOver=function(e){this.preventAndStopEventPropagation(e),this.isOver||this.disabled||(this.isOver=!0,this.itemDragOver.emit())},e.prototype.onDragLeave=function(e){this.preventAndStopEventPropagation(e),this.isOver&&this.isTrueLeave(e)&&!this.disabled&&(this.isOver=!1,this.itemDragLeave.emit())},e.prototype.onDrop=function(e){if(!this.disabled&&e instanceof DragEvent){this.preventAndStopEventPropagation(e),this.isOver=!1;try{this.itemDrop.emit(e.dataTransfer.files)}catch(t){console.error(t)}}},e.prototype.preventAndStopEventPropagation=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.isTrueLeave=function(e){var t,i;try{for(var n=y(this.whiteListClasses),r=n.next();!r.done;r=n.next()){var o=r.value;if(null!=e.fromElement&&0<=e.fromElement.className.indexOf(o))return!1}}catch(a){t={error:a}}finally{try{r&&!r.done&&(i=n["return"])&&i.call(n)}finally{if(t)throw t.error}}return!0},e.decorators=[{type:n.Directive,args:[{selector:"[inputFileDropZone]"}]}],e.propDecorators={disabled:[{type:n.Input}],itemDragOver:[{type:n.Output}],itemDragLeave:[{type:n.Output}],itemDrop:[{type:n.Output}],onDragOver:[{type:n.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:n.HostListener,args:["dragleave",["$event"]]}],onDrop:[{type:n.HostListener,args:["drop",["$event"]]}]},e}(),I=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[k,{provide:"config",useValue:e}]}},t.decorators=[{type:n.NgModule,args:[{declarations:[L,F],imports:[i.CommonModule,r.FormsModule,o.MatButtonModule,a.MatFormFieldModule,l.MatIconModule,c.MatInputModule,r.ReactiveFormsModule],exports:[F],providers:[k],entryComponents:[F]}]}],t}();e.InputFileComponent=F,e.InputFileModule=I,e.InputFileService=k,e.ɵa=L,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-input-file.umd.min.js.map